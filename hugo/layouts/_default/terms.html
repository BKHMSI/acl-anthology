{{ define "javascript" }}
<script>

    let lang_codes = ['af', 'sq', 'am', 'ar', 'hy', 'az', 'bn', 'bs', 'bg', 'ca', 'zh', 'hr', 'cs', 'da', 'nl', 'et', 'fl', 'fi', 'fr', 'ka', 'de', 'el', 'ha', 'he', 'hi', 'hu', 'is', 'id', 'ga', 'it', 'ja', 'jv', 'kk', 'ko', 'lt', 'mk', 'ms', 'ml', 'mt', 'mn', 'no', 'fa', 'pl', 'pt', 'ro', 'ru', 'sr', 'si', 'sk', 'so', 'es', 'sw', 'sv', 'ta', 'bo', 'tr', 'uk', 'ur', 'uz', 'vi', 'en'];
    let languages = ['Afrikaans', 'Albanian', 'Amharic', 'Arabic', 'Armenian', 'Azerbaijani', 'Bengali', 'Bosnian', 'Bulgarian', 'Catalan', 'Chinese', 'Croatian', 'Czech', 'Danish', 'Dutch', 'Estonian', 'Filipino', 'Finnish', 'French', 'Georgian', 'German', 'Greek', 'Hausa', 'Hebrew', 'Hindi', 'Hungarian', 'Icelandic', 'Indonesian', 'Irish', 'Italian', 'Japanese', 'Javanese', 'Kazakh', 'Korean', 'Lithuanian', 'Macedonian', 'Malay', 'Malayalam', 'Maltese', 'Mongolian', 'Norwegian', 'Persian', 'Polish', 'Portuguese', 'Romanian', 'Russian', 'Serbian', 'Sinhala', 'Slovak', 'Somali', 'Spanish', 'Swahili', 'Swedish', 'Tamil', 'Tibetan', 'Turkish', 'Ukranian', 'Urdu', 'Uzbek', 'Vietnamese', 'English'];

    $( document ).ready(function() {
        let lang_select = document.getElementById("lang_select");
        lang_select.innerHTML += "<option value='' disabled selected>Choose Language</option>"
        for(let idx in languages){
            let lang = languages[idx];
            let code = lang_codes[idx];
            lang_select.innerHTML += `<option value="${code}">${lang}</option>`;
        }
    });

    $('#lang_select').on('change', function() {
        console.log( this.value );
    });

    function clearSearch(){
        document.getElementById('lang_query').value = "";
        filterTerms();
    }
    
    function filterTerms(){
        let query = document.getElementById('lang_query').value;
        var table = document.getElementById('term_content');
        let flag = query.trim() == '';
        for (var i = 1, row; row = table.rows[i]; i+=6) {
            let text = row.cells[0].innerHTML;
            if(flag && row.style.display == 'none'){
                for(var j = i; j<6+i; j++){
                    table.rows[j].style.display = '';
                }
            }else if(!text.includes(query)){
                for(var j = i; j<6+i; j++){
                    table.rows[j].style.display = 'none';
                }
            }
        }
    }

    $("#lang_query").on('keyup', function (event) {
      if (event.keyCode === 13) {
         filterTerms();
      }
   });


</script>
{{ end }}

{{ define "main" }}
<main aria-role="main">
  <h1 id="title">
    {{ .Title }}
  </h1>
  {{ with .Params.subtitle }}
  <p class="lead text-muted">{{ . }}</p>
  {{ end }}
  <hr />

  <div class="input-group" style="padding:20px">
    <div class="form-outline">
        <div style="float:right;" class="form-group">
            <!-- <label>Choose a Language:</label> -->
            <select name="lang_select" id="lang_select" class="form-control"></select>
        </div>
      <input type="search" id="lang_query" class="form-control" placeholder="Search..." style="display:inline-block; width:30%"/>
        <button type="button" onclick="filterTerms()" class="btn btn-primary">Search
        <i class="fas fa-search"></i>
        </button>
        <button type="button" onclick="clearSearch()" class="btn btn-danger">Clear</button>
    </div>
  </div>

  <table class="table table-striped table-responsive-lg" id="term_content">
    <thead>
        <tr>
            <th scope="col"> Term </th>
            <th scope="col"> Frequency </th>
            <th scope="col"> Example Contexts </th>
        </tr>
    </thead>
    <tbody>
        {{ range .Site.Data.terms }}
            <tr>
                {{ if eq .wiki ""}}
                    <td rowspan="6"> {{ .term }} </td>
                {{else}}
                    <td rowspan="6"> <a href="{{.wiki}}"> {{ .term }} </a> </td>
                {{end}}
                <td rowspan="6"> {{ .frequency }} </td>
            </tr>
            {{ range .sentences}}
            <tr>
                <td> 
                    {{ $abs_id := index (split .id ":") 0}}
                    <a href="https://aclanthology.org/{{ $abs_id }}/">{{ $abs_id }}</a>
                    <br>
                    {{ .sentence }} 
                </td>
            </tr>
            {{end}}
        {{ end }}
    </tbody>

  </table>


</main>
{{ end }}
